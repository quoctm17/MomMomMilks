@page "/Customer/OrderHistory"
@model FE.Pages.Customer.IndexModel
@{
    ViewData["Title"] = "Customer Information";
}

<style>
    .sidebar {
        background-color: #f8f9fa;
        padding: 20px;
        border-radius: 10px;
        height: fit-content;
    }

    .main-content {
        padding: 20px;
        height: fit-content;
    }

    .sidebar a {
        text-decoration: none;
        display: block;
        padding: 10px 15px;
        color: #333;
    }

        .sidebar a:hover {
            background-color: #ddd;
        }
</style>

<div class="container-fluid">
    <div class="row">
        <!-- Sidebar -->
        <div class="col-lg-2 col-md-3 sidebar bg-light pt-4">
            <div class="text-center mb-4">
                @{
                    @using Helpers
                    @using Models
                    var account = SessionHelper.GetObjectFromJson<User>(HttpContext.Session, "user");
                }
                @if (account != null)
                {
                    <h5>@account.UserName</h5>
                }
                else
                {
                    <script>
                        window.location.href = '/Login';
                    </script>
                }
            </div>
            <div class="list-group list-group-flush">
                <a href="#" class="list-group-item list-group-item-action rounded">User Information</a>
                <a asp-page="/Customer/OrderHistory" asp-route-userId="@account?.Id" class="list-group-item list-group-item-action rounded">My Orders</a>
                <a href="#" class="list-group-item list-group-item-action rounded">My Address</a>
                <a href="#" class="list-group-item list-group-item-action rounded">My Coupon</a>
            </div>
        </div>
        <!-- Main Content -->
        <div class="col-lg-10 col-md-9 main-content pt-4">
            <ul class="nav nav-tabs mb-4">
                <li class="nav-item">
                    <a class="nav-link active" href="#">All</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Paid</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Waiting For Shipping</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Shipping</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Completed</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Cancelled</a>
                </li>
            </ul>
            <div class="text-center mt-4">
                @if (Model.OrderHistories != null && Model.OrderHistories.Any())
                {
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>Order</th>
                                <th>Created Date</th>
                                <th>Updated Date</th>
                                <th>Total Amount</th>
                                <th>Payment Method</th>
                                <th>Shipper</th>
                                <th>Status</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var order in Model.OrderHistories)
                            {
                                <tr>
                                    <td>@order.Id</td>
                                    <td>@order.CreateAt.ToString("dd/MM/yyyy")</td>
                                    <td>@order.UpdateAt.ToString("dd/MM/yyyy")</td>
                                    <td>@order.TotalAmount</td>
                                    <td>@order.PaymentType</td>
                                    <td>@order.Shipper</td>
                                    <td>@order.OrderStatus</td>
                                    <td><a asp-page="/Customer/OrderDetail" asp-route-id="@order.Id" class="site-btn">View</a></td>
                                </tr>
                            }
                        </tbody>
                    </table>
                }
                else
                {
                    <p>Place order and enjoy <span class="text-danger">Fast Shipping</span></p>
                    <button class="btn btn-warning">Start buying</button>
                    <button class="btn btn-outline-danger">View Your Cart</button>
                }
            </div>
        </div>
    </div>
</div>
